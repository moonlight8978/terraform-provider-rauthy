services:
  rauthy:
    image: ghcr.io/sebadob/rauthy:0.34.1
    restart: unless-stopped
    ports:
      - "8443:8443"
      - "8080:8080"
    environment:
      LOCAL_TEST: "true"
      LOG_LEVEL: debug
      SWAGGER_UI_ENABLE: "true"
      SWAGGER_UI_PUBLIC: "true"
    volumes:
      - rauthy-data:/app/data

  mailcrab:
    image: marlonb/mailcrab:latest
    restart: unless-stopped
    ports:
      - "17025:1025"
      - "17080:1080"

  echo:
    image: mendhak/http-https-echo:latest
    restart: unless-stopped
    ports:
      - "17180:8080"

  app:
    image: mcr.microsoft.com/devcontainers/go:2.0.8-1.25-bookworm
    command: sleep infinity
    tty: true
    working_dir: /workspace
    volumes:
      - ..:/workspace:cached

volumes:
  rauthy-data:
